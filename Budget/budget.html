<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="budget.css">
</head>
<body>
    <nav class="bg-gray-800 p-4">
        <ul class="flex space-x-4">
            <li><a href="/index.html" class="text-white hover:text-gray-300">Home</a></li>
            <li><a href="/about" class="text-white hover:text-gray-300">About</a></li>
            <li><a href="/contact" class="text-white hover:text-gray-300">Experiences</a></li>
            <li><a href="/Budget/budget.html" class="text-white hover:text-gray-300">Budget</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <h1 class="page-title">Budget Tracker</h1>
        
        <div class="budget-summary">
            <div class="summary-card">
                <h3>Total Income</h3>
                <p class="amount income">$0.00</p>
            </div>
            <div class="summary-card">
                <h3>Total Expenses</h3>
                <p class="amount expense">$0.00</p>
            </div>
            <div class="summary-card">
                <h3>Balance</h3>
                <p class="amount balance">$0.00</p>
            </div>
        </div>
        
        <div class="budget-form">
            <h2>Add Transaction</h2>
            <form>
                <div class="form-group">
                    <label for="description">Description</label>
                    <input type="text" id="description" placeholder="Enter description">
                </div>
                <div class="form-group">
                    <label for="amount">Amount</label>
                    <input type="number" id="amount" placeholder="Enter amount" step="0.01">
                </div>
                <div class="form-group">
                    <label for="type">Type</label>
                    <select id="type">
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit">Add Transaction</button>
            </form>
        </div>
        
        <div class="transactions">
            <h2>Transaction History</h2>
            <div class="transaction-list">
                <!-- Transactions will be added here -->
            </div>
        </div>
    </div>

    <script>
        // State management
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

        // DOM elements
        const form = document.querySelector('form');
        const descriptionInput = document.getElementById('description');
        const amountInput = document.getElementById('amount');
        const typeSelect = document.getElementById('type');
        const transactionList = document.querySelector('.transaction-list');
        const totalIncomeEl = document.querySelector('.income');
        const totalExpenseEl = document.querySelector('.expense');
        const balanceEl = document.querySelector('.balance');

        // Initialize app
        function init() {
            renderTransactions();
            updateSummary();
        }

        // Add transaction
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const description = descriptionInput.value.trim();
            const amount = parseFloat(amountInput.value);
            const type = typeSelect.value;

            if (!description || !amount || amount <= 0) {
                alert('Please enter valid description and amount');
                return;
            }

            const transaction = {
                id: Date.now(),
                description,
                amount,
                type,
                date: new Date().toLocaleDateString()
            };

            transactions.push(transaction);
            saveTransactions();
            renderTransactions();
            updateSummary();

            // Clear form
            descriptionInput.value = '';
            amountInput.value = '';
            typeSelect.value = 'income';
        });

        // Render transactions
        function renderTransactions() {
            transactionList.innerHTML = '';

            if (transactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; color: #a0aec0; padding: 2rem;">No transactions yet. Add your first transaction above!</p>';
                return;
            }

            transactions.slice().reverse().forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = `transaction-item ${transaction.type}`;
                transactionEl.innerHTML = `
                    <div class="transaction-description">
                        <strong>${transaction.description}</strong>
                        <br>
                        <small style="color: #a0aec0;">${transaction.date}</small>
                    </div>
                    <span class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toFixed(2)}
                    </span>
                    <button class="btn-delete" onclick="deleteTransaction(${transaction.id})">Delete</button>
                `;
                transactionList.appendChild(transactionEl);
            });
        }

        // Delete transaction
        function deleteTransaction(id) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                transactions = transactions.filter(t => t.id !== id);
                saveTransactions();
                renderTransactions();
                updateSummary();
            }
        }

        // Update summary
        function updateSummary() {
            const income = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);

            const expense = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);

            const balance = income - expense;

            totalIncomeEl.textContent = `$${income.toFixed(2)}`;
            totalExpenseEl.textContent = `$${expense.toFixed(2)}`;
            balanceEl.textContent = `$${balance.toFixed(2)}`;

            // Color code balance
            if (balance > 0) {
                balanceEl.style.color = '#48bb78';
            } else if (balance < 0) {
                balanceEl.style.color = '#f56565';
            } else {
                balanceEl.style.color = '#4299e1';
            }
        }

        // Save to localStorage
        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        // Make deleteTransaction globally accessible
        window.deleteTransaction = deleteTransaction;

        // Initialize on page load
        init();
    </script>
</body>
</html>
